<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>MoneyMonky</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="style.css">
  <!-- Alkalmaz√°s ikonja (favicon) -->
  <link rel="icon" href="icons/icon-192x192.png" type="image/png">
  <!-- Pie diagramhoz a Chart.js k√∂nyvt√°r (CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <h1>MoneyMonky</h1>
    <div class="month-navigation">
      <button id="prev-month">&lt;</button>
      <span id="current-month"></span>
      <button id="next-month">&gt;</button>
    </div>
  </header>
  <main>
    <!-- Egyenleg √©s √∂sszes√≠t≈ë r√©sz -->
    <section class="balance-summary">
      <h2>Egyenleg</h2>
      <p>Bev√©tel: <span id="total-income">0</span> Ft</p>
      <p>Kiad√°s: <span id="total-expense">0</span> Ft</p>
      <p>Megtakar√≠t√°s: <span id="total-saving">0</span> Ft</p>
      <p>Egyenleg: <span id="balance">0</span> Ft</p>
    </section>

    <!-- K√∂lts√©gvet√©si tervez≈ë -->
    <section class="budget-planner">
      <h2>K√∂lts√©gvet√©si tervez≈ë</h2>
      <form id="budget-form">
        <label for="monthly-budget">Havi k√∂lts√©gvet√©s:</label>
        <input type="number" id="monthly-budget" placeholder="Pl.: 300000" required>
        <button type="submit">Ment√©s</button>
      </form>
      <p>Tervezett k√∂lts√©gvet√©s: <span id="saved-budget">0</span> Ft</p>
      <p>Kiad√°sok ar√°nya a k√∂lts√©gvet√©shez: <span id="budget-adherence">0%</span></p>
    </section>

    <!-- √öj t√©tel felvitele -->
    <section class="transaction-entry">
      <h2>√öj t√©tel hozz√°ad√°sa</h2>
      <form id="transaction-form">
        <div class="form-group">
          <label for="transaction-type">T√≠pus:</label>
          <select id="transaction-type">
            <option value="income">Bev√©tel</option>
            <option value="expense">Kiad√°s</option>
            <option value="saving-deposit">Megtakar√≠t√°s bet√©t</option>
            <option value="saving-withdrawal">Megtakar√≠t√°s kiv√©t</option>
          </select>
        </div>
        <div class="form-group">
          <label for="transaction-date">D√°tum:</label>
          <input type="date" id="transaction-date" required>
        </div>
        <div class="form-group">
          <label for="transaction-amount">√ñsszeg (Ft):</label>
          <input type="number" id="transaction-amount" placeholder="Pl. 5000" required>
        </div>
        <div class="form-group">
          <label for="transaction-category">Kateg√≥ria:</label>
          <select id="transaction-category"></select>
          <button type="button" id="add-category-btn">+ √öj kateg√≥ria</button>
        </div>
        <button type="submit">T√©tel hozz√°ad√°sa</button>
      </form>
    </section>

    <!-- T√°rolt t√©telek list√°ja -->
    <section class="transactions-list">
      <h2>T√°rolt t√©telek</h2>
      <ul id="transactions"></ul>
    </section>

    <!-- K√∂rdiagram a kateg√≥ri√°k megoszl√°s√°r√≥l -->
    <section class="chart-section">
      <h2>Kateg√≥ri√°k megoszl√°sa (%)</h2>
      <canvas id="pieChart"></canvas>
    </section>

    <!-- CSV let√∂lt√©s -->
    <section class="csv-export">
      <button id="export-csv">CSV let√∂lt√©s</button>
    </section>
  </main>

  <!-- Modal ablak az √∫j kateg√≥ria felvitel√©hez -->
  <div id="category-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>√öj kateg√≥ria hozz√°ad√°sa</h2>
      <form id="category-form">
        <div class="form-group">
          <label for="category-name">Kateg√≥ria n√©v:</label>
          <input type="text" id="category-name" required>
        </div>
        <div class="form-group">
          <label for="category-icon">Ikon (emoji vagy sz√∂veg):</label>
          <input type="text" id="category-icon" placeholder="Pl. üçî" required>
        </div>
        <div class="form-group">
          <label for="category-color">Sz√≠n (hex k√≥d, pl.: #ff0000):</label>
          <input type="color" id="category-color" value="#ff0000" required>
        </div>
        <button type="submit">Kateg√≥ria hozz√°ad√°sa</button>
      </form>
    </div>
  </div>

  <!-- Service worker regisztr√°ci√≥ja -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('service-worker.js')
          .then(registration => {
            console.log('ServiceWorker regisztr√°lva:', registration);
          })
          .catch(error => {
            console.error('ServiceWorker regisztr√°l√°s sikertelen:', error);
          });
      });
    }
  </script>

  <script src="script.js" defer></script>
</body>
</html>
